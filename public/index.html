<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Tuy·ªÅn & Trang üíï</title>
  <meta name="description" content="T√¨nh y√™u c·ªßa hai ch√∫ng m√¨nh">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div id="app">

    <!-- ===== ANIMATED BACKGROUND ===== -->
    <div id="animated-bg">
      <div id="gradient-bg"></div>
      <div id="bg-image" style="display:none;"></div>
      <canvas id="hearts-canvas"></canvas>
      <canvas id="particles-canvas"></canvas>
    </div>

    <!-- ===== HOME VIEW ===== -->
    <div id="home-view" class="view active">
      <!-- Nav Bar -->
      <nav class="navbar">
        <div class="nav-title">üíï Tuy·ªÅn & Trang</div>
        <div class="nav-actions">
          <button onclick="openView('gallery')" class="nav-btn" title="Th∆∞ vi·ªán ·∫£nh">
            <i class="fas fa-images"></i>
          </button>
          <button onclick="openView('playlist')" class="nav-btn" title="Playlist nh·∫°c">
            <i class="fas fa-music"></i>
          </button>
          <button onclick="openView('settings')" class="nav-btn" title="C√†i ƒë·∫∑t">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </nav>

      <div class="home-content" id="home-scroll">
        <!-- Couple Avatars -->
        <div class="couple-header">
          <div class="avatar-wrap">
            <div class="avatar" id="avatar1">
              <span class="avatar-initial">T</span>
            </div>
          </div>
          <div class="heart-pulse">
            <i class="fas fa-heart"></i>
          </div>
          <div class="avatar-wrap">
            <div class="avatar" id="avatar2">
              <span class="avatar-initial">T</span>
            </div>
          </div>
        </div>
        <h1 class="couple-name" id="couple-name">Tuy·ªÅn & Trang</h1>

        <!-- Countdown -->
        <div class="countdown-section">
          <div class="days-big" id="days-big">0</div>
          <div class="days-label">ng√†y y√™u nhau</div>
          <div class="countdown-detail">
            <div class="detail-item">
              <span class="detail-num" id="detail-years">0</span>
              <span class="detail-label">nƒÉm</span>
            </div>
            <div class="detail-item">
              <span class="detail-num" id="detail-months">0</span>
              <span class="detail-label">th√°ng</span>
            </div>
            <div class="detail-item">
              <span class="detail-num" id="detail-days">0</span>
              <span class="detail-label">ng√†y</span>
            </div>
            <div class="detail-item">
              <span class="detail-num" id="detail-hours">0</span>
              <span class="detail-label">gi·ªù</span>
            </div>
          </div>
        </div>

        <!-- Heartbeat animation -->
        <div class="heartbeat-container">
          <div class="heartbeat">‚ù§Ô∏è</div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <i class="fas fa-clock"></i>
            <span class="stat-num" id="stat-hours">0</span>
            <span class="stat-label">gi·ªù b√™n nhau</span>
          </div>
          <div class="stat-card">
            <i class="fas fa-camera"></i>
            <span class="stat-num" id="stat-photos">0</span>
            <span class="stat-label">k·ª∑ ni·ªám</span>
          </div>
          <div class="stat-card">
            <i class="fas fa-music"></i>
            <span class="stat-num" id="stat-songs">0</span>
            <span class="stat-label">b√†i h√°t</span>
          </div>
          <div class="stat-card">
            <i class="fas fa-heart"></i>
            <span class="stat-num" id="stat-anniversaries">0</span>
            <span class="stat-label">k·ª∑ ni·ªám nƒÉm</span>
          </div>
        </div>

        <!-- Photo Carousel -->
        <div class="carousel-section">
          <div class="carousel-header">
            <h2>üì∏ Kho·∫£nh kh·∫Øc</h2>
            <button onclick="openView('gallery')" class="see-all">Xem t·∫•t c·∫£ ‚Üí</button>
          </div>
          <div class="carousel" id="photo-carousel">
            <div class="carousel-empty">Ch∆∞a c√≥ ·∫£nh n√†o. Th√™m ·∫£nh trong Gallery!</div>
          </div>
        </div>

        <!-- Music Carousel - Album Anh -->
        <div class="carousel-section">
          <div class="carousel-header">
            <h2>üéµ Album Anh</h2>
            <button onclick="openView('playlist', 'tuyen')" class="see-all">Xem t·∫•t c·∫£ ‚Üí</button>
          </div>
          <div class="carousel" id="music-carousel-tuyen">
            <div class="carousel-empty">Ch∆∞a c√≥ b√†i h√°t n√†o.</div>
          </div>
        </div>

        <!-- Music Carousel - Album Em -->
        <div class="carousel-section">
          <div class="carousel-header">
            <h2>üé∂ Album Em</h2>
            <button onclick="openView('playlist', 'trang')" class="see-all">Xem t·∫•t c·∫£ ‚Üí</button>
          </div>
          <div class="carousel" id="music-carousel-trang">
            <div class="carousel-empty">Ch∆∞a c√≥ b√†i h√°t n√†o.</div>
          </div>
        </div>

        <div class="footer-space"></div>
      </div>
    </div>

    <!-- ===== GALLERY MODAL ===== -->
    <div id="gallery-view" class="modal-view">
      <div class="modal-header">
        <button onclick="closeView('gallery')" class="back-btn"><i class="fas fa-arrow-left"></i></button>
        <h2>üì∏ Th∆∞ Vi·ªán ·∫¢nh</h2>
        <button onclick="showUploadPhoto()" class="add-btn"><i class="fas fa-plus"></i></button>
      </div>
      <div class="gallery-grid" id="gallery-grid">
        <!-- Photos rendered by JS -->
      </div>
    </div>

    <!-- ===== PHOTO VIEWER ===== -->
    <div id="photo-viewer" class="overlay" style="display:none;">
      <div class="viewer-controls">
        <button onclick="closePhotoViewer()" class="viewer-btn"><i class="fas fa-times"></i></button>
        <span class="viewer-counter" id="viewer-counter">1 / 1</span>
        <div>
          <button onclick="toggleSlideshow()" class="viewer-btn" id="slideshow-btn"><i class="fas fa-play"></i></button>
          <button onclick="deleteCurrentPhoto()" class="viewer-btn danger"><i class="fas fa-trash"></i></button>
        </div>
      </div>
      <div class="viewer-image-wrap">
        <button onclick="prevPhoto()" class="viewer-nav left"><i class="fas fa-chevron-left"></i></button>
        <img id="viewer-image" src="" alt="" class="viewer-image">
        <button onclick="nextPhoto()" class="viewer-nav right"><i class="fas fa-chevron-right"></i></button>
      </div>
      <div class="viewer-caption" id="viewer-caption"></div>
    </div>

    <!-- ===== PLAYLIST MODAL ===== -->
    <div id="playlist-view" class="modal-view">
      <div class="modal-header">
        <button onclick="closeView('playlist')" class="back-btn"><i class="fas fa-arrow-left"></i></button>
        <h2>üéµ Playlist</h2>
        <button onclick="showUploadMusic()" class="add-btn"><i class="fas fa-plus"></i></button>
      </div>
      <div class="playlist-tabs">
        <button class="tab-btn active" onclick="switchMusicTab('tuyen')">üíô Album c·ªßa Anh</button>
        <button class="tab-btn" onclick="switchMusicTab('trang')">üíó Album c·ªßa Em</button>
      </div>
      <div class="song-list" id="song-list">
        <!-- Songs rendered by JS -->
      </div>
    </div>

    <!-- ===== MUSIC PLAYER ===== -->
    <div id="player-view" class="overlay" style="display:none;">
      <div id="player-bg" class="player-bg"></div>
      <div class="player-content">
        <button onclick="closePlayer()" class="player-close"><i class="fas fa-chevron-down"></i></button>
        <div class="player-cover-wrap">
          <img id="player-cover" src="" alt="" class="player-cover">
        </div>
        <div class="player-info">
          <h2 id="player-title">Song Title</h2>
          <p id="player-artist">Artist</p>
        </div>
        <div class="player-progress">
          <input type="range" id="player-seek" min="0" max="100" value="0" class="seek-bar">
          <div class="player-times">
            <span id="player-current">0:00</span>
            <span id="player-duration">0:00</span>
          </div>
        </div>
        <div class="player-controls">
          <button onclick="playerShuffle()" class="ctrl-btn" id="shuffle-btn"><i class="fas fa-random"></i></button>
          <button onclick="playerPrev()" class="ctrl-btn"><i class="fas fa-step-backward"></i></button>
          <button onclick="playerToggle()" class="ctrl-btn play-btn" id="play-btn"><i class="fas fa-play"></i></button>
          <button onclick="playerNext()" class="ctrl-btn"><i class="fas fa-step-forward"></i></button>
          <button onclick="playerRepeat()" class="ctrl-btn" id="repeat-btn"><i class="fas fa-redo"></i></button>
        </div>
      </div>
    </div>

    <!-- ===== SETTINGS MODAL ===== -->
    <div id="settings-view" class="modal-view">
      <div class="modal-header">
        <button onclick="closeView('settings')" class="back-btn"><i class="fas fa-arrow-left"></i></button>
        <h2>‚öôÔ∏è C√†i ƒê·∫∑t</h2>
        <button onclick="saveSettings()" class="save-btn">L∆∞u</button>
      </div>
      <div class="settings-content">
        <!-- Profile -->
        <div class="settings-section">
          <h3>üë´ H·ªì s∆° c·∫∑p ƒë√¥i</h3>
          <div class="avatar-editors">
            <div class="avatar-editor">
              <div class="avatar avatar-edit" id="settings-avatar1" onclick="uploadAvatar(1)">
                <span class="avatar-initial">T</span>
              </div>
              <span class="avatar-label">Anh</span>
              <input type="file" id="avatar1-input" accept="image/*" style="display:none;" onchange="handleAvatarUpload(1, this)">
            </div>
            <div class="avatar-editor">
              <div class="avatar avatar-edit" id="settings-avatar2" onclick="uploadAvatar(2)">
                <span class="avatar-initial">T</span>
              </div>
              <span class="avatar-label">Em</span>
              <input type="file" id="avatar2-input" accept="image/*" style="display:none;" onchange="handleAvatarUpload(2, this)">
            </div>
          </div>
          <label class="setting-label">T√™n c·∫∑p ƒë√¥i</label>
          <input type="text" id="settings-name" class="setting-input" value="Tuy√™n & Trang">
          <label class="setting-label">Ng√†y y√™u nhau</label>
          <input type="date" id="settings-date" class="setting-input">
        </div>

        <!-- Background -->
        <div class="settings-section">
          <h3>üé® T√πy ch·ªânh n·ªÅn</h3>
          <div class="bg-type-toggle">
            <button class="toggle-btn active" id="bg-gradient-btn" onclick="setBgType('gradient')">Gradient</button>
            <button class="toggle-btn" id="bg-image-btn" onclick="setBgType('image')">·∫¢nh</button>
          </div>
          <div id="gradient-options">
            <label class="setting-label">M√†u Gradient</label>
            <div class="color-row">
              <div class="color-picker-wrap">
                <label>M√†u 1</label>
                <input type="color" id="settings-color1" value="#FF6B9D" class="color-picker">
              </div>
              <div class="color-picker-wrap">
                <label>M√†u 2</label>
                <input type="color" id="settings-color2" value="#C06C84" class="color-picker">
              </div>
            </div>
            <div class="color-presets">
              <div class="preset" style="background:linear-gradient(135deg,#FF6B9D,#C06C84)" onclick="setPreset('#FF6B9D','#C06C84')"></div>
              <div class="preset" style="background:linear-gradient(135deg,#ee9ca7,#ffdde1)" onclick="setPreset('#ee9ca7','#ffdde1')"></div>
              <div class="preset" style="background:linear-gradient(135deg,#fc5c7d,#6a82fb)" onclick="setPreset('#fc5c7d','#6a82fb')"></div>
              <div class="preset" style="background:linear-gradient(135deg,#f093fb,#f5576c)" onclick="setPreset('#f093fb','#f5576c')"></div>
              <div class="preset" style="background:linear-gradient(135deg,#4facfe,#00f2fe)" onclick="setPreset('#4facfe','#00f2fe')"></div>
              <div class="preset" style="background:linear-gradient(135deg,#a18cd1,#fbc2eb)" onclick="setPreset('#a18cd1','#fbc2eb')"></div>
            </div>
          </div>
          <div id="image-options" style="display:none;">
            <button class="upload-bg-btn" onclick="document.getElementById('bg-input').click()">
              <i class="fas fa-image"></i> Ch·ªçn ·∫£nh n·ªÅn
            </button>
            <input type="file" id="bg-input" accept="image/*" style="display:none;" onchange="handleBgUpload(this)">
          </div>
        </div>

        <!-- Animations -->
        <div class="settings-section">
          <h3>‚ú® Hi·ªáu ·ª©ng</h3>
          <div class="setting-row">
            <span>C∆∞·ªùng ƒë·ªô: <strong id="intensity-val">5</strong>/10</span>
            <input type="range" id="settings-intensity" min="1" max="10" value="5" class="slider" oninput="document.getElementById('intensity-val').textContent=this.value">
          </div>
          <div class="setting-row">
            <span>üíñ Tr√°i tim bay</span>
            <label class="switch"><input type="checkbox" id="enable-hearts" checked><span class="slider-toggle"></span></label>
          </div>
          <div class="setting-row">
            <span>‚ú® H·∫°t s√°ng</span>
            <label class="switch"><input type="checkbox" id="enable-particles" checked><span class="slider-toggle"></span></label>
          </div>
          <div class="setting-row">
            <span>üåà Gradient ƒë·ªông</span>
            <label class="switch"><input type="checkbox" id="enable-gradient" checked><span class="slider-toggle"></span></label>
          </div>
          <div class="setting-row">
            <span>üåä Parallax</span>
            <label class="switch"><input type="checkbox" id="enable-parallax" checked><span class="slider-toggle"></span></label>
          </div>
        </div>

        <!-- Theme Color -->
        <div class="settings-section">
          <h3>üé® M√†u ch·ªß ƒë·ªÅ</h3>
          <div class="color-picker-wrap">
            <input type="color" id="settings-theme" value="#FF6B9D" class="color-picker">
          </div>
        </div>
      </div>
    </div>

    <!-- ===== UPLOAD PHOTO MODAL ===== -->
    <div id="upload-photo-modal" class="upload-modal" style="display:none;">
      <div class="upload-modal-content">
        <div class="upload-modal-header">
          <button onclick="hideUploadPhoto()" class="back-btn"><i class="fas fa-times"></i></button>
          <h3>Th√™m ·∫£nh m·ªõi</h3>
          <button onclick="submitPhoto()" class="save-btn">L∆∞u</button>
        </div>
        <div class="upload-form">
          <div class="file-drop" onclick="document.getElementById('photo-file').click()" id="photo-drop">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Ch·ªçn ·∫£nh ho·∫∑c k√©o th·∫£ v√†o ƒë√¢y</p>
            <input type="file" id="photo-file" accept="image/*" style="display:none;" onchange="previewPhoto(this)">
          </div>
          <img id="photo-preview" src="" style="display:none;" class="upload-preview">
          <input type="text" id="photo-caption" class="setting-input" placeholder="Ghi ch√∫ (t√πy ch·ªçn)">
          <input type="date" id="photo-date" class="setting-input">
        </div>
      </div>
    </div>

    <!-- ===== UPLOAD MUSIC MODAL ===== -->
    <div id="upload-music-modal" class="upload-modal" style="display:none;">
      <div class="upload-modal-content">
        <div class="upload-modal-header">
          <button onclick="hideUploadMusic()" class="back-btn"><i class="fas fa-times"></i></button>
          <h3>Th√™m b√†i h√°t</h3>
          <button onclick="submitMusic()" class="save-btn">L∆∞u</button>
        </div>
        <div class="upload-form">
          <!-- Upload mode tabs -->
          <div class="upload-tabs">
            <button class="upload-tab active" onclick="switchUploadMode('file')">üìÅ Upload file</button>
            <button class="upload-tab" onclick="switchUploadMode('link')">üîó Link ngo√†i</button>
          </div>

          <div id="upload-file-mode">
            <div class="file-drop" onclick="document.getElementById('music-file').click()">
              <i class="fas fa-music"></i>
              <p>Ch·ªçn file nh·∫°c (MP3, M4A, WAV)</p>
              <input type="file" id="music-file" accept="audio/*" style="display:none;" onchange="previewMusic(this)">
            </div>
            <p id="music-filename" class="file-name"></p>
            <div class="file-drop small" onclick="document.getElementById('cover-file').click()">
              <i class="fas fa-image"></i>
              <p>Ch·ªçn ·∫£nh b√¨a (t√πy ch·ªçn)</p>
              <input type="file" id="cover-file" accept="image/*" style="display:none;" onchange="previewCover(this)">
            </div>
            <img id="cover-preview" src="" style="display:none;" class="upload-preview small">
          </div>

          <div id="upload-link-mode" style="display:none;">
            <input type="url" id="music-url" class="setting-input" placeholder="Link YouTube, Spotify, Zing MP3...">
          </div>

          <input type="text" id="music-title" class="setting-input" placeholder="T√™n b√†i h√°t *">
          <input type="text" id="music-artist" class="setting-input" placeholder="Ngh·ªá sƒ©">
          <div class="owner-select">
            <button class="owner-btn active" data-owner="tuyen" onclick="selectOwner('tuyen')">üíô Album Anh</button>
            <button class="owner-btn" data-owner="trang" onclick="selectOwner('trang')">üíó Album Em</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Mini Player (bottom bar) -->
    <div id="mini-player" class="mini-player" style="display:none;" onclick="openPlayer()">
      <img id="mini-cover" src="" class="mini-cover">
      <div class="mini-info">
        <span id="mini-title">Song</span>
        <span id="mini-artist">Artist</span>
      </div>
      <button onclick="event.stopPropagation(); playerToggle()" class="mini-play" id="mini-play-btn">
        <i class="fas fa-play"></i>
      </button>
    </div>
  </div>

  <audio id="audio-element"></audio>
  <script src="/js/app.js"></script>
</body>
</html>
